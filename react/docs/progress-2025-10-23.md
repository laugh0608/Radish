# 开发进度（2025-10-23）

## 今日工作概览
- 顶部导航中部改为搜索框，移动端抽屉也提供搜索输入。
- 新增 Dock 底部栏：玻璃态半透明、根据屏幕宽度自适应、窄屏逐级隐藏图标。
- Dock 交互：向下滚动隐藏、停止滚动自动显示，向上滚动显示；新增返回顶部图标。
- 导航栏加入 Dock 开关，并改为拨动开关样式（与主题/语言控件一致）。
- 主内容区域根据 Dock 实际高度自适应底部留白，避免遮挡且仅在 Dock 可见时生效。
- Dock 图标悬浮提示气泡（桌面）、通知角标示例、右键/长按菜单（简易）。
- 新增 Dock 跟随放大“鱼眼”动效（桌面端 hover 设备）。

## 关键实现细节
- useScrollDirection：阈值去抖（4px）、最小触发高度（80px）、空闲显示延迟（260ms）。
- 玻璃效果：`backdrop-filter: blur(12px)` + `color-mix` 渐变并带高光描边、投影。
- 鱼眼动效：在 Dock 列表 `mousemove` 中基于指针到各图标中心的距离计算高斯影响：
  - 公式：`scale = 1 + (max-1) * exp(-(d^2)/(2*sigma^2))`，半径约 120px，最大缩放约 1.65。
  - 通过 CSS 变量 `--dock-scale` 注入到每个按钮，`transform-origin: bottom center`，并按缩放量轻微上抬。
- 仅桌面开启动效：通过 `matchMedia('(hover: hover)')` 保护，移动端不参与。
- Dock 高度变化通过 `ResizeObserver` 写入 `--dock-inset-bottom`，`body` 使用该变量作为 `padding-bottom`。

## 影响范围
- 组件：`NavBar`、`BottomBar`、`DockToggle`、`StickyStack`（间接）、全局样式 `index.css`。
- i18n：新增 `dock.*` 与菜单项 `menu.*` 文案，保持中英覆盖。

## 今日提交
- （今日无 git 提交，以上为工作区变更摘要）

## 下一步建议
- 将 Dock 图标与实际路由/功能对接；为角标接入真实未读数。
- 可选：增加 Dock 图标跟随放大时的“鱼眼轨迹”插值或弹跳缓动；支持拖动重排与自定义隐藏。
