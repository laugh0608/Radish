### 经验值系统测试
### 变量定义
@baseUrl = https://localhost:5000
@token = YOUR_TOKEN_HERE

### ===== 1. 经验值查询接口测试 =====

### 1.1 获取当前用户经验值信息（从Token中获取用户ID）
GET {{baseUrl}}/api/v1/Experience/GetMyExperience
Authorization: Bearer {{token}}

### 1.2 获取指定用户经验值信息（通过URL参数指定用户ID）
GET {{baseUrl}}/api/v1/Experience/GetMyExperience/20002
Authorization: Bearer {{token}}

### 1.3 获取所有等级配置
GET {{baseUrl}}/api/v1/Experience/GetLevelConfigs

### 1.4 获取指定等级配置
GET {{baseUrl}}/api/v1/Experience/GetLevelConfig/1

### 1.5 获取当前用户经验值交易记录
GET {{baseUrl}}/api/v1/Experience/GetTransactions?pageIndex=1&pageSize=20
Authorization: Bearer {{token}}

### ===== 2. 发帖测试（验证经验值发放）=====

### 2.1 发布帖子（会自动获得 20 经验值，首次发帖额外 30 经验值）
POST {{baseUrl}}/api/v1/Post/CreatePost
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "测试发帖获得经验值",
  "content": "这是一篇测试帖子，用于验证发帖后是否自动获得经验值。\n\n应该获得:\n- 发帖奖励: +20 经验\n- 首次发帖奖励: +30 经验（仅首次）",
  "categoryId": 1,
  "tags": ["测试", "经验值"]
}

### 2.2 再次发布帖子（验证不会重复获得首次发帖奖励）
POST {{baseUrl}}/api/v1/Post/CreatePost
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "第二篇测试帖子",
  "content": "这是第二篇测试帖子，验证只有首次发帖才会获得额外奖励。\n\n应该获得:\n- 发帖奖励: +20 经验",
  "categoryId": 1,
  "tags": ["测试"]
}

### ===== 3. 升级测试（验证升级奖励和通知）=====

### 3.1 管理员调整经验值（模拟升级）
POST {{baseUrl}}/api/v1/Experience/AdminAdjustExperience
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "userId": 1,
  "deltaExp": 200,
  "reason": "测试升级功能"
}

### 3.2 查看经验值变化
GET {{baseUrl}}/api/v1/Experience/GetMyExperience
Authorization: Bearer {{token}}

### 3.3 查看萝卜币余额（验证升级奖励）
GET {{baseUrl}}/api/v1/Coin/GetMyBalance
Authorization: Bearer {{token}}

### 3.4 查看通知（验证升级通知）
GET {{baseUrl}}/api/v1/Notification/GetMyNotifications?pageIndex=1&pageSize=10
Authorization: Bearer {{token}}

### ===== 4. 经验值交易记录测试 =====

### 4.1 查看经验值交易记录（筛选发帖类型）
GET {{baseUrl}}/api/v1/Experience/GetTransactions?pageIndex=1&pageSize=20&expType=POST_CREATE
Authorization: Bearer {{token}}

### 4.2 查看所有类型的经验值交易记录
GET {{baseUrl}}/api/v1/Experience/GetTransactions?pageIndex=1&pageSize=50
Authorization: Bearer {{token}}

### ===== 5. 完整测试流程 =====

### 5.1 第一步：查看初始经验值
# @name initialExp
GET {{baseUrl}}/api/v1/Experience/GetMyExperience
Authorization: Bearer {{token}}

###

### 5.2 第二步：发布第一篇帖子
# @name firstPost
POST {{baseUrl}}/api/v1/Post/CreatePost
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "完整流程测试 - 第一篇帖子",
  "content": "验证经验值系统完整流程",
  "categoryId": 1,
  "tags": ["测试"]
}

###

### 5.3 第三步：等待 3 秒后查看经验值变化
GET {{baseUrl}}/api/v1/Experience/GetMyExperience
Authorization: Bearer {{token}}

###

### 5.4 第四步：查看经验值交易记录
GET {{baseUrl}}/api/v1/Experience/GetTransactions?pageIndex=1&pageSize=10
Authorization: Bearer {{token}}

###

### 5.5 第五步：发布第二篇帖子
POST {{baseUrl}}/api/v1/Post/CreatePost
Authorization: Bearer {{token}}
Content-Type: application/json

{
  "title": "完整流程测试 - 第二篇帖子",
  "content": "验证不会重复获得首次发帖奖励",
  "categoryId": 1
}

###

### 5.6 第六步：再次查看经验值（应该只增加 20，没有首次奖励）
GET {{baseUrl}}/api/v1/Experience/GetMyExperience
Authorization: Bearer {{token}}

###

### ===== 6. 等级排行榜测试（P1 阶段）=====

### 6.1 获取等级排行榜
# GET {{baseUrl}}/api/v1/Experience/GetLeaderboard?pageIndex=1&pageSize=50
# Authorization: Bearer {{token}}

### 6.2 获取当前用户排名
# GET {{baseUrl}}/api/v1/Experience/GetMyRank
# Authorization: Bearer {{token}}
