# 2. 核心概念

> 入口页：[萝卜币系统设计方案](/guide/radish-coin-system)

## 2.1 萝卜币种类

| 币种 | 英文名 | 换算关系 | 说明 |
|------|--------|----------|------|
| **胡萝卜** | Carrot | 基础单位 | 最小交易单位，不可再分 |
| **白萝卜** | Radish | 1 白萝卜 = 100 胡萝卜 | 高级单位，便于大额显示 |

**换算规则**：
- 系统内部统一使用**胡萝卜（Carrot）**作为存储单位（整数）
- 白萝卜仅用于显示，换算时向下取整（避免精度丢失）

**显示规则** 🎯：
- **小于 1000 胡萝卜**：直接显示胡萝卜
  - 示例：`999 胡萝卜`、`500 胡萝卜`、`1 胡萝卜`
- **大于等于 1000 胡萝卜**：显示为 "x 白萝卜 x 胡萝卜"（混合显示）
  - 示例：
    - `1000 胡萝卜` → `10 白萝卜`
    - `12345 胡萝卜` → `123 白萝卜 45 胡萝卜`
    - `50000 胡萝卜` → `500 白萝卜`
- **紧凑显示模式**（可选）：始终显示为白萝卜（带小数）
  - 示例：`12345 胡萝卜` → `123.45 白萝卜`

**代码示例**：
```csharp
// 标准显示（智能切换）
string display1 = CoinCalculator.FormatDisplay(999);      // "999 胡萝卜"
string display2 = CoinCalculator.FormatDisplay(1000);     // "10 白萝卜"
string display3 = CoinCalculator.FormatDisplay(12345);    // "123 白萝卜 45 胡萝卜"

// 紧凑显示（始终白萝卜）
string compact = CoinCalculator.FormatAsWhiteRadish(12345); // "123.45 白萝卜"
```

## 2.2 最小交易单位与计算规则

**最小交易金额**：
- **最小消费金额**：`1 胡萝卜`
- **最小转账金额**：`1 胡萝卜`
- **手续费最小值**：`1 胡萝卜`（不足 1 胡萝卜时免收）

**核心计算原则** 🎯：
1. **整数为王**：所有交易链路以胡萝卜（整数）为准，**不产生小数**
2. **统一舍入**：所有比例计算**向下取整（Floor）**，确保可预测
3. **差额透明**：记录理论金额和实际金额，支持审计对账
4. **白萝卜展示**：仅用于前端显示，实际交易以胡萝卜为准（1 白萝卜 = 100 胡萝卜）

**计算工具**：
- 使用 `Radish.Common.Utils.CoinCalculator` 统一处理所有金额计算
- 自动记录舍入差额，防止累积误差导致对账困难

---

