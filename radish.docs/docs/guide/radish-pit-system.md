# 萝卜坑应用设计方案

> 版本：v1.0 | 最后更新：2026-01-24 | 状态：设计中

## 拆分说明
萝卜坑应用文档较长，为便于阅读已拆分为多篇文档；章节编号保持不变。

## 文档导航
- [2. 核心概念](/guide/radish-pit-core-concepts)
- [3-5. 功能模块](/guide/radish-pit-game-mechanics)
- [6-8. 技术实现](/guide/radish-pit-backend)
- [9. 前端设计](/guide/radish-pit-frontend)
- [10. 实施计划](/guide/radish-pit-roadmap)

---

## 1. 系统概述

萝卜坑应用是基于现有萝卜币系统的正式应用，将原有的"萝卜币演示"改造为功能完整的萝卜币管理平台。通过合理的词汇设计和功能规划，提供类似钱包的完整功能，同时规避潜在的监管风险。

### 1.1 核心设计原则

- **安全第一**：多层安全防护，确保用户资产安全
- **用户友好**：简洁直观的界面设计，降低使用门槛
- **词汇规避**：使用"萝卜坑"、"转移"、"收纳"等替代敏感词汇
- **功能完整**：提供完整的资产管理功能
- **性能优先**：高并发、低延迟的系统响应
- **可扩展性**：支持未来功能扩展和业务发展

### 1.2 业务边界

**本期实现**：
- ✅ 账户总览和余额管理
- ✅ 用户间转账功能
- ✅ 交易记录查询和管理
- ✅ 支付密码安全设置
- ✅ 收支统计和数据分析
- ✅ 通知中心和消息管理

**暂不实现**：
- ❌ 第三方支付集成（避免监管风险）
- ❌ 法币兑换功能（合规考虑）
- ❌ 投资理财功能（业务范围限制）

### 1.3 系统架构

```
┌─────────────────────────────────────────────────────────────┐
│                    萝卜坑应用 (RadishPit)                      │
├─────────────────────────────────────────────────────────────┤
│  账户总览  │  转账功能  │  交易记录  │  安全设置  │  统计分析  │
├─────────────────────────────────────────────────────────────┤
│                      前端组件层                              │
│  AccountOverview │ Transfer │ TransactionHistory │ Security  │
├─────────────────────────────────────────────────────────────┤
│                      API接口层                               │
│    CoinController │ PaymentPasswordController │ Statistics   │
├─────────────────────────────────────────────────────────────┤
│                      业务服务层                              │
│      CoinService │ PaymentPasswordService │ NotificationSvc  │
├─────────────────────────────────────────────────────────────┤
│                      数据访问层                              │
│   UserBalance │ CoinTransaction │ UserPaymentPassword        │
├─────────────────────────────────────────────────────────────┤
│                      数据存储层                              │
│        Radish.db (业务数据) │ Radish.Log.db (日志数据)        │
└─────────────────────────────────────────────────────────────┘
```

### 1.4 核心业务流程

#### 转账流程
1. **发起转账** → 输入接收方和金额
2. **支付密码验证** → 二次安全确认
3. **余额检查** → 验证可用余额充足
4. **执行转账** → 原子性事务处理
5. **通知推送** → 双方收到交易通知
6. **记录日志** → 完整的审计追踪

#### 安全验证流程
1. **密码输入** → 用户输入支付密码
2. **哈希验证** → BCrypt密码验证
3. **失败计数** → 记录失败次数
4. **锁定机制** → 超过限制自动锁定
5. **解锁条件** → 时间到期或管理员解锁

### 1.5 与现有系统集成

| 集成系统 | 集成点 | 集成方式 | 数据流向 |
|---------|--------|----------|----------|
| 用户认证系统 | JWT Token验证 | API Header | 双向 |
| 萝卜币奖励系统 | 奖励发放接口 | Service调用 | 单向流入 |
| 通知系统 | 交易通知推送 | 事件订阅 | 单向流出 |
| 审计日志系统 | 操作记录 | 日志写入 | 单向流出 |
| WebOS桌面 | 应用注册 | 组件注册 | 配置集成 |

### 1.6 词汇替换策略

为规避监管风险，采用以下词汇替换策略：

| 敏感词汇 | 替代词汇 | 使用场景 |
|---------|---------|----------|
| 钱包 | 萝卜坑 | 应用名称、界面标题 |
| 支付 | 转移 | 转账功能描述 |
| 充值 | 收纳 | 资金流入描述 |
| 提现 | 取出 | 资金流出描述 |
| 余额 | 存量 | 账户余额显示 |
| 转账 | 转移 | 用户间资金转移 |
| 收款 | 接收 | 资金接收方描述 |
| 付款 | 发送 | 资金发送方描述 |

---

## 相关文档
- [萝卜币系统](/guide/coin-system)
- [用户认证系统](/guide/authentication)
- [通知系统](/guide/notification-system)

---

> 本文档随萝卜坑应用开发持续更新，如有变更请同步修改 [更新日志](/changelog/)。