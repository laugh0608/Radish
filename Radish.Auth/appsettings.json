{
  // ============================================================
  // Radish.Auth - OIDC 认证服务器配置模板
  // ============================================================
  // 说明：本配置文件包含所有可用配置项及其默认值
  //       开发/部署时，请复制本文件为 appsettings.Local.json
  //       然后修改其中的敏感信息（数据库密码、Redis密码、OpenIddict密钥等）
  // 注意：appsettings.Local.json 已在 .gitignore 中排除，不会提交到仓库
  // ============================================================

  // 日志配置
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning",
      "OpenIddict": "Information"
    }
  },

  // 允许的入口地址
  "AllowedHosts": "*",

  // CORS 配置（跨域资源共享）
  // 开发环境：添加前端、API、Gateway 地址
  // 生产环境：配置实际的域名
  "Cors": {
    "AllowedOrigins": [
      "https://localhost:5000",
      "http://localhost:5001"
    ]
  },

  // AutoMapper 配置
  // 如有商业许可证，请在 appsettings.Local.json 中配置
  "AutoMapper": {
    "LicenseKey": ""
  },

  // SqlSugar 的雪花 ID 算法配置
  // WorkId 必须在同一部署环境中唯一（范围 0-30）
  // 约定：API=0, Gateway=1, Auth=2
  "Snowflake": {
    "WorkId": 2,
    // 数据中心 ID，默认为 0 即可
    "DataCenterId": 0
  },

  // Redis 配置
  // Enable: true=使用 Redis，false=使用内存缓存
  // 本地开发建议使用 false（内存缓存），生产环境建议使用 Redis
  "Redis": {
    "Enable": false,
    "ConnectionString": "localhost:6379,allowAdmin=true",
    "InstanceName": "RadishAuth"
  },
  // Redis 远程服务器示例（生产环境）
  // "Redis": {
  //   "Enable": true,
  //   "ConnectionString": "your-redis-server.com:6379,password=your_redis_password,allowAdmin=true,ssl=true",
  //   "InstanceName": "RadishAuth"
  // },

  // 数据库配置
  // MainDb: 标识当前项目的主库
  // Log: 日志库（固定名称，不要修改）
  // 默认使用 SQLite（适合本地开发和快速启动）
  "MainDb": "Main",
  "Databases": [
    /**
     * DbType 类型对照表：
     * MySql = 0,
     * SqlServer = 1,
     * Sqlite = 2,
     * Oracle = 3,
     * PostgreSql = 4,
     * DaMeng = 5, // 达梦
     * Kdbndp = 6, // 金仓
     */
    {
      "ConnId": "Main",
      "DbType": 2, // SQLite
      "Enabled": true,
      // SQLite 只需数据库名，文件将自动在项目根目录创建
      "ConnectionString": "Radish.db" // 主库，要和 API 项目保持一致
    },
    {
      "ConnId": "Log", // 日志库（固定名称，不要修改）
      "DbType": 2, // SQLite
      "Enabled": true,
      "HitRate": 50,
      "ConnectionString": "Radish.Log.db" // 主日志库，要和 API 项目保持一致
    }
  ],
  // PostgreSQL 配置示例（生产环境推荐）
  // 使用时将上面的 Databases 配置替换为以下内容：
  // "Databases": [
  //   {
  //     "ConnId": "Main",
  //     "DbType": 4, // PostgreSQL
  //     "Enabled": true,
  //     "ConnectionString": "Host=localhost;Port=5432;Database=radish_auth;Username=postgres;Password=your_password_here"
  //   },
  //   {
  //     "ConnId": "Log",
  //     "DbType": 4, // PostgreSQL
  //     "Enabled": true,
  //     "HitRate": 50,
  //     "ConnectionString": "Host=localhost;Port=5432;Database=radish_auth_log;Username=postgres;Password=your_password_here"
  //   }
  // ],

  // OpenIddict 数据库连接字符串（可选）
  // 默认情况下，OpenIddict 数据库会自动创建在解决方案根目录的 DataBases 文件夹：
  // DataBases/Radish.OpenIddict.db
  // 如果需要自定义数据库路径或使用其他数据库，可以在 appsettings.Local.json 中配置：
  // "ConnectionStrings": {
  //   "OpenIddict": "Data Source=/custom/path/Radish.OpenIddict.db"
  // }
  // 或使用 PostgreSQL：
  // "ConnectionStrings": {
  //   "OpenIddict": "Host=localhost;Port=5432;Database=radish_openiddict;Username=postgres;Password=your_password_here"
  // }

  // OpenIddict 配置
  "OpenIddict": {
    // 服务器配置
    "Server": {
      // 发行者 URL（认证服务器地址）
      // 本地开发：http://localhost:5200（直接访问）或 https://localhost:5000（通过 Gateway）
      // 生产环境：https://your-domain.com（通过 Gateway）
      "Issuer": "https://localhost:5000",

      // 令牌有效期（分钟）
      "AccessTokenLifetime": 60, // 访问令牌：60分钟
      "RefreshTokenLifetime": 43200, // 刷新令牌：30天
      "AuthorizationCodeLifetime": 5, // 授权码：5分钟

      // 是否允许不安全的 HTTP（仅开发环境使用）
      // 生产环境必须设置为 false，使用 HTTPS
      "AllowInsecureHttp": false
    },

    // 加密配置
    "Encryption": {
      // 统一使用仓库中的 Certs/dev-auth-cert.pfx 作为开发证书
      // 生产环境必须重新生成证书并修改密码
      "UseDevelopmentKeys": false,
      "SigningCertificatePath": "../Certs/dev-auth-cert.pfx",
      "SigningCertificatePassword": "RadishDevCert123!",
      "EncryptionCertificatePath": "../Certs/dev-auth-cert.pfx",
      "EncryptionCertificatePassword": "RadishDevCert123!"
    }
  }
  // OpenIddict 生产环境配置示例：
  // "OpenIddict": {
  //   "Server": {
  //     "Issuer": "https://your-domain.com",
  //     "AccessTokenLifetime": 60,
  //     "RefreshTokenLifetime": 43200,
  //     "AuthorizationCodeLifetime": 5,
  //     "AllowInsecureHttp": false
  //   },
  //   "Encryption": {
  //     "UseDevelopmentKeys": false,
  //     "SigningCertificatePath": "/app/certs/auth-signing.pfx",
  //     "SigningCertificatePassword": "your-prod-password",
  //     "EncryptionCertificatePath": "/app/certs/auth-encryption.pfx",
  //     "EncryptionCertificatePassword": "your-prod-password"
  //   }
  // }
}
